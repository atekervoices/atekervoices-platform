<!-- Header Component -->
<nav class="navbar navbar-expand-lg shadow-sm fixed-top" style="background-color: #ffffff !important;">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="{{ url_for('main.index') }}">
            <img src="{{ url_for('static', filename='img/ateker-logo.png') }}" alt="Ateker Logo" style="height: 60px; margin-right: 15px;">
            <span class="font-weight-bold" style="color: #333 !important;">Ateker Voices</span>
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" style="border-color: #333;">
            <span class="navbar-toggler-icon" style="background-image: url('data:image/svg+xml,%3csvg viewBox=\'0 0 30 30\' xmlns=\'http://www.w3.org/2000/svg\'%3e%3cpath stroke=\'rgba(51, 51, 51, 1)\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-miterlimit=\'10\' d=\'M4 7h22M4 15h22M4 23h22\'/%3e%3c/svg%3e');"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link" href="#features" style="color: #333 !important;">Features</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#languages" style="color: #333 !important;">Languages</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#about" style="color: #333 !important;">About</a>
                </li>
            </ul>
            
            {% if current_user.is_authenticated %}
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="color: #333 !important;">
                            <i class="fas fa-user"></i> {{ current_user.username }}
                        </a>
                        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                            {% if current_user.is_admin %}
                                <a class="dropdown-item" href="{{ url_for('main.admin_admin') }}">
                                    <i class="fas fa-cog"></i> Admin Panel
                                </a>
                                <div class="dropdown-divider"></div>
                            {% endif %}
                            <a class="dropdown-item" href="#" onclick="logout()">
                                <i class="fas fa-sign-out-alt"></i> Logout
                            </a>
                        </div>
                    </li>
                </ul>
            {% else %}
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item mb-2">
                        <a class="nav-link btn" href="{{ url_for('main.login') }}" style="color: white !important; background-color: #d0630e; border-color: #d0630e;">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn ms-2" href="{{ url_for('main.register') }}" style="color: #d0630e !important; border-color: #d0630e;">Register</a>
                    </li>
                </ul>
            {% endif %}
        </div>
    </div>
</nav>

{% if not current_user.is_authenticated %}
<script>
function logout() {
    window.location.href = "{{ url_for('main.logout') }}";
}
</script>
{% else %}
<!-- Logout Confirmation Modal -->
<div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="logoutModalLabel">Confirm Logout</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to logout?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="confirmLogout()">Logout</button>
            </div>
        </div>
    </div>
</div>

<script>
function logout() {
    const logoutModal = new bootstrap.Modal(document.getElementById('logoutModal'));
    logoutModal.show();
}

function confirmLogout() {
    window.location.href = "{{ url_for('main.logout') }}";
}
</script>
{% endif %}
